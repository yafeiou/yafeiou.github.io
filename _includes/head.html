<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  {% if page.nav %}
  <title>{{ page.title }}</title>
  {% else %}
  <title>{{ site.title }}</title>
  {% endif %}

  <!-- CSS -->
  <link rel="stylesheet" href="{{ "/assets/css/main.css" | relative_url }}">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Libre+Baskerville:400,400i,700">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/all.css">
  <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/academicons.css"/>

  <!-- Google Analytics -->
  {% if site.google_analytics %}
  <script>
      (function(i, s, o, g, r, a, m) {
          i['GoogleAnalyticsObject'] = r;
          i[r] = i[r] || function() {
              (i[r].q = i[r].q || []).push(arguments)
          }, i[r].l = 1 * new Date();
          a = s.createElement(o),
              m = s.getElementsByTagName(o)[0];
          a.async = 1;
          a.src = g;
          m.parentNode.insertBefore(a, m)
      })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

      ga('create', '{{ site.google_analytics }}', 'auto');
      ga('send', 'pageview');

  </script>
  {% endif %}

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var featuredView = document.getElementById('portfolio-featured');
      var topicView    = document.getElementById('portfolio-by-topic');

      document.querySelectorAll('.portfolio-tab').forEach(function (tab) {
        tab.addEventListener('click', function () {
          var view = this.getAttribute('data-view');

          document.querySelectorAll('.portfolio-tab').forEach(function (t) {
            t.classList.remove('active');
          });
          this.classList.add('active');

          if (view === 'featured') {
            if (featuredView) featuredView.style.display = '';
            if (topicView)    topicView.style.display    = 'none';
          } else if (view === 'topic') {
            if (featuredView) featuredView.style.display = 'none';
            if (topicView)    topicView.style.display    = '';
          }
        });
      });

    document.querySelectorAll('.topic-more-link').forEach(function (el) {
        el.addEventListener('click', function () {
          // 找到所属的 topic-block
          var block = this.closest('.topic-block');
          if (!block) return;

          var moreDiv = block.querySelector('.topic-more');
          if (!moreDiv) return;

          var isHidden = (moreDiv.style.display === 'none' || moreDiv.style.display === '');
          if (isHidden) {
            moreDiv.style.display = 'block';
            this.textContent = 'Less';
          } else {
            moreDiv.style.display = 'none';
            this.textContent = 'More';
          }
        });
      });
    });
    </script>



</head>
